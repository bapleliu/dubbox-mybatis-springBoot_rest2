# Java消息处理机制


## JMS API

- ConnectionFactory
- Destination
- Connection
- Session
- MessageConsumer
- MessageProducer


## 点对点消息传送模型

只需要讲消息发送给唯一的消息消费者时需要用点对点模型.

虽然可能会有多个消费者在队列中侦听同一消息，但是,只有一个消费者线程会接收到该消息

> p2p的特点

+ 消息通过称为**队列**的一个虚拟通道来进行交换．队列是生产者发送消息的目的地和接收者消费消息的消息源
+ 每条消息仅会传送给一个接收者．可能会有多个接收者在一个队列里侦听，但是每个队列中的消息只能被队列中的一个接收者所消费
+ 消息存在先后顺序，一个队列会按照消息服务器将消息放入队列中的顺序，把他们传送给消费者，当消息已被消费时，就会从队列头部
将他们删除（除非使用了消息优先级）
+ 生产者和消费者之间没有耦合．接收者和发送者可以在运行时动态添加，这使得系统的复杂性可以随着时间而增长或降低


> 两种类型

1.异步即发即弃(fire-and-forget) 处理

消费生产者向某个队列发送一条消息，它不会期望接收到一个响应(至少不是立刻接收到响应)．这类处理可用于触发一个事件或者用于向接收者发出
请求来执行一个并不需要响应的特定活动．

2.异步请求/应答处理

消息生产者向队列发送一条消息，然后阻塞等待应答队列，该应答队列正在等待来自接收者的响应


> p2p模型API

+ QueueConnectionFactory
+ Queue
+ QUeueConnection
+ QueueSession
+ QueueSender
+ QueueReceiver


## 发布/订阅模式消息传送模型(Pub/Sub)

将事件或消息广播给多个消息消费者

在发布/订阅模型中，侦听主题的所有消息消费者（订阅者）都会接收到传送的消息


> Pub/Sub模型的特征

+ 通过一个称为主题的虚拟通道进行通信交换
+ 每条消息都会传送给称为订阅者的多个消息消费者．订阅者有许多类型，包括持久型，非持久型和动态型
+ 发布者通常不会知道也意识不到那个订阅者正在接收主题消息
+ 消息被推送给消费者，这意味着消息会传送给消费者，而无须请求．消息通过一个称为**主题**的虚拟通道进行交换．主题就是生产者
发布消息和订阅者消费消息的目的地．传送给一个主题的消息被自动地推送给所有合格的消费者
+ 一般来说，生产者和消费者之间没用耦合．订阅者和发布者可以在运行时动态添加
+ 订阅一个主题的每个客户端都会接收到发布到该主题的消息副本．发布者生产的单条消息可以复制并分发给成百上千个订阅者




## 消息驱动中间件软件（MOM）

### ActiveMQ

##### ActiveMQ介绍

ActiveMQ是Apache软件基金下的一个开源软件，它遵循JMS1.1规范（Java Message Service），是消息驱动中间件软件（MOM）。
它为企业消息传递提供高可用，出色性能，可扩展，稳定和安全保障。ActiveMQ使用Apache许可协议。因此，任何人都可以使用和修改它而不必反馈任何改变。
这对于商业上将ActiveMQ用在重要用途的人尤为关键。MOM的工作是在分布式的各应用之间调度事件和消息，使之到达指定的接收者。所以高可用，高性能，高可扩展性尤为关键。

ActiveMQ的目标是在尽可能多的平台和语言上提供一个标准的，消息驱动的应用集成。ActiveMQ实现JMS规范并在此之上提供大量额外的特性。


